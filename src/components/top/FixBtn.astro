---
import Btn from '../ui/Btn.astro';
---

<div class="fix-btn" tabindex="-1">
	<Btn href="https://forms.gle/AfVbLJEp7Vwnn4X2A" txt="スポンサー申し込み" modifier="fix" />
</div>

<style>
	@layer components {
		.fix-btn {
			position: fixed;
			top: 40px;
			right: 48px;
			z-index: var(--z_above);
			opacity: 0;
			pointer-events: none;
			transition: opacity 0.5s ease;
			&.is-active {
				opacity: 1;
				--this_toggle_btn: auto;
			}
		}
		@media (--sp) {
			.fix-btn {
				top: auto;
				left: 0;
				right: 0;
				bottom: 20px;
				margin: auto;
				text-align: center;
				padding-inline: 32px;
			}
		}
	}
</style>

<script>
	import gsap from 'gsap';
	import { ScrollTrigger } from 'gsap/ScrollTrigger';
	gsap.registerPlugin(ScrollTrigger);

	const fixBtn = document.querySelector('.fix-btn');
	const triggerElement = document.querySelector('.fix-wrapper[data-trigger="fix-btn"]');
	ScrollTrigger.create({
		trigger: triggerElement,
		start: 'top top',
		end: 'bottom bottom',
		toggleClass: { targets: fixBtn, className: 'is-active' },
	});
	ScrollTrigger.normalizeScroll();
</script>